# Working ClusterAccess Example with Kubeconfig Authentication
# This example shows how to connect to a kind cluster using kubeconfig-based authentication

---
apiVersion: v1
kind: Secret
metadata:
  name: kind-kind-kubeconfig
  namespace: default
type: Opaque
stringData:
  kubeconfig: |
    apiVersion: v1
    clusters:
    - cluster:
        certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJT3U1bnFzTHFVOTB3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TlRBMk1EVXhOREl3TWpSYUZ3MHpOVEEyTURNeE5ESTFNalJhTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUUNxSnRoRTFORTh4elNyRTBhRVVSbkdnNi9KNlVxNTluUzJDaFBCZ25jOUdVU1VnNlRMcDFsdi9nWGwKTm95ek1NTlRmRWJIeEV6cklCTUtFclRpYUF2M0l3R1F2aXk4MUVRY1VSMk5tR1hmVktBb2ZoUUQrUVluOHBMZApvcjh2NVc1NEhnbHgyeW1GRTI4RVVBaTN4YVdLaEMvSmRvbTArRkFCY2NkTENxSUpZaFppcDVpQkcvYTE3UUkxCm83eGlJZVZmOVBHdXRQb0VSdnBCQjJXSmpnZUx3WEhZdTJUdG5zYTF0dUdNd2ZlcFVJWEYvNXp6bUNxazhiLzcKcUZCWHIrcjFhZEV1akRVaUVma1BpZTV1Zk9ObURsQWdaU2tJeXpTbHdBcC9ITG9rdEdPL3JXZkE0TDh1eXNIRwo3dEJLQXE4Z0hhOVNadHRXcXl6aytsckNnV2loQWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJRS2ljUkw0ejJ0Vkx4akhtOExudnh5bVVIUkVUQVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQkl1SHBpdm1DZgplZ3I0M0ZEZHBVM2E2NDlmYzU2WmdUMlU4dUpSRm1pV1ZFK3RJbVczdzIvZ2pzS2t1QTNqTGJqdm03YXFpSkpKCjlIbkpGMHZnc0gvVVdBWDE4TFdjS0ozZW1WTzJYTlZPYmFjQWQ1YVcxU2NwRjdxelI5YW10K2RrNEdSdTg1QUUKWmxpcUVJR1U4TEd4d09RSmU5dnVBeGtpTWR0ZCtIaW9yR2lZU1JDek03dHJ2ZHhkcjd4UnZwSDlFcE8rUjNQRwpxU2tNOFBhSEVzSm9qT0s2aXdxcTNHTVRWbXhOUWRlZFYyZ2VGWFluUXlaaGhFTzhLNUt6UHNXNW9tN0c0U241Cm9CMytHOVU1WVdVUjBzV09PL0plNHhYOWtMVE41dEFyaW1wQytBdmFNSDZSNDNKNXd0M0o4ZTNpSHRESUdCR0EKSGJleHpReXpIRkdwCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
        server: https://127.0.0.1:51042
      name: kind-kind
    contexts:
    - context:
        cluster: kind-kind
        user: kind-kind
      name: kind-kind
    current-context: kind-kind
    kind: Config
    preferences: {}
    users:
    - name: kind-kind
      user:
        client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURLVENDQWhHZ0F3SUJBZ0lJWlVkUG56ek1FdTh3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TlRBMk1EVXhOREl3TWpSYUZ3MHlOakEyTURVeE5ESTFNalJhTUR3eApIekFkQmdOVkJBb1RGbXQxWW1WaFpHMDZZMngxYzNSbGNpMWhaRzFwYm5NeEdUQVhCZ05WQkFNVEVHdDFZbVZ5CmJtVjBaWE10WVdSdGFXNHdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFERTBwYk8KOXhVV3ljQTZ4TE1McWlNM1VQUW50U3VaRzJ0UzFXNkRmbktwU3g2WHN3Ylg3UG1Fdk83Z093eml0Y3Q3UDd5eApyL1dweDMzdEFrei9LdnJWYVNhcFBmd0lnQWhXTlZzUUVScSs3Q0hyUXJkR2h3cEg2MXRFVEZ5OXVRSHIvMUNRCkpyQWxjSGpzYXZqTzRYRnc5U3E1MTdRQkVYbGswODJYREpCMDUrTTZHZlFOY1p6YWVBTzQwM1JWZ0VkN2tMRmsKQ2VEcHozbEIyMkJLN1llakhlTTBqNkxpR3ZVVjlaVlZtbXdkaWI1dXcxZUlOU2svdHBUeERTcUlHZFZoWTNhRQpHOHZkU2g4TXdpbW1SK1kyanhnWnlrdkVxMzI0dWpaY0R3VU93djZtQWhpeHpqd3R2b3B6bG1GbE8wcHRFNTE1ClZMbGZmQXNoekhQMFV0QU5BZ01CQUFHalZqQlVNQTRHQTFVZER3RUIvd1FFQXdJRm9EQVRCZ05WSFNVRUREQUsKQmdnckJnRUZCUWNEQWpBTUJnTlZIUk1CQWY4RUFqQUFNQjhHQTFVZEl3UVlNQmFBRkFxSnhFdmpQYTFVdkdNZQpid3VlL0hLWlFkRVJNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUFYQ0hPR1U3ZTVTUjI1S0VPYXhYNFBFZ0h5CldFVHg4V1RUTTI0enBQSmZvc1BqWGR4TGZ0SW05MmM3a216Q25yeVJ4MXVHSkRkeEpYVHlYZlpOVVdIc1h6LzUKR2E2c2RmTmdRd3ZMTEo3OGpHYUM1V0JaWERHQmtSY2ViSk9SSGRtUVZUOHB1WThmeGY2Vk9Xdkt3Ni90Rm11YQpUWVlVdjQ2VldLci9FUHNjeFlVVlp3cE9jZFgzQ0NpVFA0bWZyOWdoOGhJMWxkY24yd21PRmJWUWlDcmJGYzBVCjkwbmpjeGwwZnJCK3JTUWF6ZU1JZWdGVUZMZlpvYXp4dXZmL1I5TWZKTEQxaGdQeFM3WkdUVE4wQkxQY29oQnkKNjdZcVdEdXRVK1YyOUhnR01Rbi9hcGpvMFVwdzJXVmZMY0pIMlJYQ3VBUHJuUldxMit2eGFUb29FUlZNCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
        client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeE5LV3p2Y1ZGc25BT3NTekM2b2pOMUQwSjdVcm1SdHJVdFZ1ZzM1eXFVc2VsN01HCjErejVoTHp1NERzTTRyWExleis4c2EvMXFjZDk3UUpNL3lyNjFXa21xVDM4Q0lBSVZqVmJFQkVhdnV3aDYwSzMKUm9jS1IrdGJSRXhjdmJrQjYvOVFrQ2F3SlhCNDdHcjR6dUZ4Y1BVcXVkZTBBUkY1Wk5QTmx3eVFkT2ZqT2huMApEWEdjMm5nRHVOTjBWWUJIZTVDeFpBbmc2Yzk1UWR0Z1N1MkhveDNqTkkraTRocjFGZldWVlpwc0hZbStic05YCmlEVXBQN2FVOFEwcWlCblZZV04yaEJ2TDNVb2ZETUlwcGtTbU5vOFlHY3BMeEt0OXVMbzJYQThGRHNMK3BnSVkKc2M0OExiNktjNVpoWlR0S2JST2RlVlM1WDN3TEljeHo5RkxRRFFJREFRQUJBb0lCQVFDaDAzUGpYd3ViM08yTQpaRVhDQlhWRytleUU2VlNiWWd2djQwUW1JVVV0SkhKV3ovK0VjWGNHU0VFdlk5M0lXU2lnZ1ZzbnpVRHpBdTdxCmU4WEsxdys5ZitNbHE2MFpZQXQ2dGd2VlBmcjdsektjT0JKd2puOUplcDFqbmxWeU9EYjRUc2R5Zmh5OTY2ZkEKMm9NUHRoU0xoMGhGM0xCSFlKS3E3K3BOa3lzQ3NtVE9HOW5aYURPM0NxOXVBKytLeXBGOHNsbWlUNEFWck9ETgpqTks0UGRDRWJhalJ4NzV2a3lsZTJmdUkzdGpRQUpoWDNMLytuNVlzYUVCb0FnbTlHWDBZdXpQUmdVOFBWbmVUCk5jTHp3d1oyeVlIL2t0L0QxT053ZFlaMUc1SUhkRUxaa0VadzZmdnVYR2hOaE1YSHhEdG5zbmEraW55SzFZNEsKRHFNbDNIb0JBb0dCQU50cFF2eFZQNkFFMmQzRFZURjkzbmg1V3dVWE5MTUdRWTBybEQycU1wSXZOeFF4aktVMQpIRjNxTXJpMlBXNEF1azAwTEpUR1llMkN5UDJVUjQ3ZFMyZk5Yc041U2RWclVhcUV5ZTZhY3REZmdwZDNZUW9TCmFDY0F2TVZoUU53QXptVmxRaCsyajU2U281S3ZFTER0SnRldTRGWmhyNWpueE5Oa2ZIdEVHQk50QW9HQkFPV2wKQTR6OC80dlhia1FZZTNEdXV3dFpZWHdWbWpMNTc2OVc0ZzJIVWRoaW9zVG5oNDl3SXdRcXhxdVVSZEdyREFaVQpsTFdEdENpTFVSSjhsM1ZsenFvbTF4WnluUTJ2Q3B2bUpXUnl2Qm41SFA1NDYvZkNQZnV2Smc2OGs4anJRejZPCjVjcER0RG5mVTh1bWxnNFBaY0FXdGdmNTNEa2cxdVNVcmRncnFTc2hBb0dBWkwrUDE2Z1pZQlA2S2w5QUprcWkKdGZVYmUxbnRnK3J5ZkswdkU2V3NOUDNqTDYyVTVHTmYxQ3Z2QUd3R0J4WGtkZ0RvRzZTQVlQdzE2R0tHL1MzVwpLeUxkU2FyTzRXVzNDVEtTT3JMRzEreFozYzBlVE82b3pvZ0RKaXNEQ2tLQWc0U2NlVTF0NHlWNFlLbHNZNkZ4CnZZWDZVdy9sL3JNbDZOOXlYWE9tRG4wQ2dZRUFtNjlKUHZYdUVWSVZzUmlmNXlvUnFGb0tHdU5TVEtqZzg1QUYKWklLTzNCSFNvNGNMZ2hUVnlHZHZsTGJLdHFBdFlNVktvOXdMOFVpeHg4U3JzYTA1ZEdVc2dFMW5aL1Y1VGNPegpLZXdXMWN6cStTSGxaMnhLTlN6Q3NrN3FLZFpGR2s0cVB2dXpYV0NvSUhKcFhGTFgrbWZyTkhFUitiRG52c09GCkwvNDVpOEVDZ1lBZ3pjdVl2eTJNRFdGOExtUHMwZHlOam1jcHlMcWgyTGVDMnJCRTRxWjlZOVJYWTdObGoxNUoKQW16VS9vS25INFJpYlQ0Tm8vSjJLRHo0OExkcERrRmdXQjhOMzRaNDJ1VDFyWWdKa0VSUXJlcWo1UGErMFFJWQpKRHkwRURIUGljdTJBK2hsWFRlYXFUemw5S241S3FUTzNHTEdhdmlPWEFTRlE2ZUF2OU85dUE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=

---
# ClusterAccess resource that will be accessible at /kind/graphql endpoint
apiVersion: gateway.openmfp.org/v1alpha1
kind: ClusterAccess
metadata:
  name: kind-kind-cluster
spec:
  path: kind  # This cluster will be accessible at /kind/graphql
  host: https://127.0.0.1:51042
  auth:
    kubeconfigSecretRef:
      name: kind-kind-kubeconfig
      namespace: default 